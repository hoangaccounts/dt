#!/usr/bin/env bash
# model/context/updated-project - Updated project context generation
#
# Responsibility: Build markdown content for projects with chat history
# Dependencies: None (pure business logic)

build_updated_project_context() {
  local project_name=$1
  local project_metadata=$2
  local foundation=$3
  local version=${4:-"0.0.1"}
  
  local content=""
  
  # Header
  content+="# AI Assistant Context: $project_name"
  content+=$'\n\n'
  content+="**Generated:** $(date '+%Y-%m-%d %H:%M:%S')"
  content+=$'\n'
  content+="**Tool:** dt ai-context v$version"
  content+=$'\n'
  content+="**Mode:** UPDATED WITH HISTORY"
  content+=$'\n\n---\n\n'
  
  # Foundation
  content+="$foundation"
  content+=$'\n\n---\n\n'
  
  # Project context with full history
  content+="$project_metadata"
  content+=$'\n\n'
  
  echo "$content"
}
